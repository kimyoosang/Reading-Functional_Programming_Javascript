# Chpater1. 함수형 길들이기

- 자바스크립트에서도 데이터 및 데이터를 다루는 함수에 대해 진지하게 고민하는 프로그래밍 패러다임이 필요한 시기가 도래했다
- 반드시 자문해봐야 할 애플리케이션의 설계요소들
  - **확장성**
    - 추가 기능을 지원하기 위해 계속 코드를 리팩터링해야 하는가?
  - **모듈화 용이성**
    - 파일 하나를 고치면 다른 파일도 영향을 받는가?
  - **재사용성**
    - 중복이 많은가?
  - **테스트성**
    - 함수를 단위 테스트하기 어려운가?
  - **헤아리기 쉬움**
    - 체계도 없고 다라가기 어려운 코드인가?

## **1.1 함수형 프로그래밍은 과연 유용한가?**

- 자바스크립트 맥락에서 보면, FP(Functional Programming) 사고방식은 자바스크립트만의 매우 표현적인 특성을 가다듬어, 깔금하면서도 모듈적인, 테그스타힉 좋고 간결한 코드를 작성하는데 도움이 된다. 결과적으로 업무 능률 또한 높아진다
- 자바스크립트 코드를 함수형으로 작성하면 대부분의 문제가 해결된다. 순수함수에 기반을 두고 이미 검증된 기법과 관례에 따라 구현하면 코드가 복잡해지더라도 헤어라기 쉬운 방향으로 작성할 수 있다

## **1.2 함수형 프로그래밍이란?**

- 함수형 프로그래밍이란, 한마디로 함수 사용을 강조하는 소프트웨어 개발 스타일이다
- FP에서는 눈앞에 맞닥뜨린 문제를 조금 다른 사고방식으로 접근해야 한다. 단지 어떤 결과를 만드는 함수를 적용하는 그런 단순한 차원의 문제가 아니다. 진짜 목표는 애플리케이션의 **부수효과를 방지**하고 **상태 변이를 감소**하기 위해 **떼이터의 제어 흐름과 연산을 추상**하는 것이다
- 예 1: HTML페이지에 텍스트를 보여주는 예시

  ```javascript
  document.querySelector("#msg").innerHTML = "<h1>Hello World</h1>";
  ```

  - 이 예제는 모든걸 하드 코딩한 단순한 프로그램이라서 메시지를 동적으로 표시할 수 없다. 내용이나 형식을 바꾼다든가. 타깃 요소를 달리한다든지 할 땐 표현식을 전부 재작성해야한다

- 예 1-1: 기존 코드에서 함수만 만들어 달라지는 부분만 매개변수로 바꾸기

  ```javascript
  function printMessage(elementId, format, message) {
    document.querySelector(
      `${elementId}`
    ).innerHTML = `<${format}>${message}<${format}>`;
  }
  ```

  - 나아지긴 했으나 아직 완벽하게 재사용 가능한 코드는 아니다. 메시지를 HTML 페이지 대신 파일에 쓴다면 어떨까?
  - 매개벼ㅓㄴ수가 단순한 스칼라 값이 아닌, 특정 기능을 함수에 추가하여 매개변수로 전달하는, 다시 말해 함수를 매개변수화 하는 전혀 다른 차원의 과정을 떠올려야 한다
  - 함수형 프로그램은 여러 함수를 서로 합성하고 평가해서 더 많은 기능을 탑재하는 것이 유일한 목표다

- 예: 1-2: 함수형으로 바꾼 printMessage

  ```javascript
  var printMessage = run(addToDom("msg"), h1, echo);
  printMessage("Hello World");
  ```

  - 함수형으로 바꾸면 재사용성과 믿음성이 좋고 이해하기 쉬운, 더 작은 조각들로 프로그램을 나눈 후, 전체적으로 더 헤아리기 쉬운 형태의 프로그램으로 다시 조합했다
  - 모든 함수형 프로그램이 이 기본 원리를 따른다
  - run함수는 세 함수를 마치 자전거 체인처럼 연결해서 한 함수의 반환값이 다른 함수의 입력값으로 전달되게끔 한다. 그래서 echo가 'Hello World'문자열을 반환하면 h1으로 전달되고, 마지막으로 이 함수의 결과값이 addToDom에 넘거난다

- 함수형 코드는 마치 알고리즘의 초기 조건을 조정하듯, 본연의 기능은 그대로 간직한 채 코드를 쉽게 변겨어하기 위해 코드 자체를 매개변수화하는 것이다. 이렇게 하면 내부 오직은 하나도 안 고치고도 예를 들어 printMessage가 메시지를 2회 표시하게, 헤더는 h2요소로, DOM대신 콘솔에 출력하게 변경하는 일도 수월해진다
- 함수형 프로그래밍을 온전히 이해하려면, 먼저 그 이면에 깔려있는 다음 기본 개념을 숙지해야 한다
  - **선언적 프로그래밍**
  - **순수함수**
  - **참조 투명성**
  - **불변성**
